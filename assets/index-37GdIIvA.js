var L=Object.defineProperty;var F=(l,e,t)=>e in l?L(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var h=(l,e,t)=>F(l,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();const x=class x{constructor(){h(this,"config");h(this,"listeners",[]);this.config={...x.DEFAULTS},this.loadFromUrl()}loadFromUrl(){const e=new URLSearchParams(window.location.search);if(e.has("ui")&&e.get("ui")==="hidden"&&(this.config.showUI=!1),e.has("rate")){const t=parseInt(e.get("rate"),10);isNaN(t)||(this.config.scanRate=t)}if(e.has("strategy")){const t=e.get("strategy");["row-column","linear","snake","quadrant","group-row-column","elimination","continuous","probability"].includes(t)&&(this.config.scanStrategy=t)}e.has("content")&&e.get("content")==="keyboard"&&(this.config.gridContent="keyboard")}get(){return{...this.config}}update(e){this.config={...this.config,...e},this.notify()}subscribe(e){this.listeners.push(e),e(this.config)}notify(){this.listeners.forEach(e=>e(this.config))}};h(x,"DEFAULTS",{scanRate:1e3,acceptanceTime:0,postSelectionDelay:0,scanStrategy:"row-column",gridContent:"numbers",gridSize:64,showUI:!0,soundEnabled:!0});let S=x;class N{constructor(e=!0){h(this,"ctx",null);h(this,"enabled",!0);this.enabled=e}setEnabled(e){this.enabled=e}initCtx(){this.ctx||(this.ctx=new(window.AudioContext||window.webkitAudioContext))}playBeep(e=440,t=.1,s="sine"){if(!this.enabled||(this.initCtx(),!this.ctx))return;this.ctx.state==="suspended"&&this.ctx.resume();const r=this.ctx.createOscillator(),i=this.ctx.createGain();r.type=s,r.frequency.setValueAtTime(e,this.ctx.currentTime),i.gain.setValueAtTime(.1,this.ctx.currentTime),i.gain.exponentialRampToValueAtTime(.001,this.ctx.currentTime+t),r.connect(i),i.connect(this.ctx.destination),r.start(),r.stop(this.ctx.currentTime+t)}playScanSound(){this.playBeep(800,.05,"square")}playSelectSound(){this.playBeep(1200,.1,"sine")}playErrorSound(){this.playBeep(200,.3,"sawtooth")}}class B extends EventTarget{constructor(t){super();h(this,"configManager");h(this,"keyMap");h(this,"activeTimers",new Map);this.configManager=t,this.keyMap=new Map([[" ","select"],["Enter","select"],["1","select"],["2","step"],["3","reset"],["4","cancel"],["s","menu"],["S","menu"]]),this.bindEvents()}bindEvents(){window.addEventListener("keydown",this.handleKeyDown.bind(this)),window.addEventListener("keyup",this.handleKeyUp.bind(this)),document.addEventListener("mousedown",t=>{t.target.closest("#settings-overlay")||this.handleSwitchDown("select")}),document.addEventListener("mouseup",t=>{t.target.closest("#settings-overlay")||this.handleSwitchUp("select")}),document.addEventListener("touchstart",t=>{t.target.closest("#settings-overlay")||(t.preventDefault(),this.handleSwitchDown("select"))}),document.addEventListener("touchend",t=>{t.target.closest("#settings-overlay")||this.handleSwitchUp("select")})}handleKeyDown(t){if(!t.repeat&&this.keyMap.has(t.key)){const s=this.keyMap.get(t.key);(s==="select"||s==="step")&&t.preventDefault(),this.handleSwitchDown(s)}}handleKeyUp(t){if(this.keyMap.has(t.key)){const s=this.keyMap.get(t.key);this.handleSwitchUp(s)}}handleSwitchDown(t){const r=this.configManager.get().acceptanceTime;if(t==="select"){const i=window.setTimeout(()=>{this.triggerAction("reset"),this.activeTimers.has("select")&&(clearTimeout(this.activeTimers.get("select")),this.activeTimers.delete("select")),this.activeTimers.set("select_handled",-1)},1e3);this.activeTimers.set("reset_timer",i)}if(r>0){const i=window.setTimeout(()=>{this.activeTimers.has("select_handled")||(this.triggerAction(t),this.activeTimers.delete(t),this.activeTimers.has("reset_timer")&&(clearTimeout(this.activeTimers.get("reset_timer")),this.activeTimers.delete("reset_timer")))},r);this.activeTimers.set(t,i)}else this.triggerAction(t)}handleSwitchUp(t){if(t==="select"&&this.activeTimers.has("reset_timer")&&(clearTimeout(this.activeTimers.get("reset_timer")),this.activeTimers.delete("reset_timer")),t==="select"&&this.activeTimers.has("select_handled")){this.activeTimers.delete("select_handled");return}this.activeTimers.has(t)&&(clearTimeout(this.activeTimers.get(t)),this.activeTimers.delete(t))}triggerAction(t){const s=new CustomEvent("switch",{detail:{action:t}});this.dispatchEvent(s),console.log(`Switch Action: ${t}`)}}class O{constructor(e){h(this,"container");h(this,"items",[]);h(this,"elements",[]);h(this,"columns",8);const t=document.getElementById(e);if(!t)throw new Error(`Container ${e} not found`);this.container=t}render(e,t=8){this.items=e,this.columns=t,this.container.innerHTML="",this.elements=[],this.container.style.gridTemplateColumns=`repeat(${t}, 1fr)`,e.forEach((s,r)=>{const i=document.createElement("div");i.className="grid-cell",i.textContent=s.label,i.dataset.index=r.toString(),i.dataset.id=s.id,this.container.appendChild(i),this.elements.push(i)})}setFocus(e){this.elements.forEach(t=>t.classList.remove("scan-focus")),e.forEach(t=>{this.elements[t]&&this.elements[t].classList.add("scan-focus")})}setSelected(e){if(this.elements[e]){const t=this.elements[e];t.classList.add("selected"),setTimeout(()=>t.classList.remove("selected"),500)}}getElement(e){return this.elements[e]}getItem(e){return this.items[e]}getItemsCount(){return this.items.length}}class j{constructor(e){h(this,"container");h(this,"formContainer");h(this,"configManager");h(this,"isVisible",!1);this.configManager=e,this.container=document.getElementById("settings-overlay"),this.formContainer=document.getElementById("settings-form"),this.initUI(),this.bindEvents(),this.configManager.get().showUI||this.container.classList.add("hidden")}initUI(){const e=this.configManager.get(),t=`
      <h3>Instructions</h3>
      <p><small>Switch 1 (Space/Enter): Select. Switch 2 (2): Step. Switch 3 (3): Reset. Switch 4 (4): Cancel/Back. 'S': Toggle Menu.</small></p>
      <hr/>
      <div class="form-group">
        <label>Scan Strategy:</label>
        <select id="setting-strategy">
          <option value="row-column">Row-Column</option>
          <option value="column-row">Column-Row</option>
          <option value="linear">Linear</option>
          <option value="snake">Snake</option>
          <option value="quadrant">Quadrant</option>
          <option value="group-row-column">Row-Group-Column</option>
          <option value="elimination">Elimination</option>
          <option value="continuous">Continuous (Mouse)</option>
          <option value="probability">Probability (PPM)</option>
        </select>
      </div>

      <div class="form-group">
        <label>Grid Content:</label>
        <select id="setting-content">
          <option value="numbers">Numbers (1-64)</option>
          <option value="keyboard">Keyboard (A-Z)</option>
        </select>
      </div>

      <div class="form-group">
        <label>Scan Rate (ms):</label>
        <input type="number" id="setting-rate" value="${e.scanRate}" min="100" max="5000" step="100">
      </div>

      <div class="form-group">
        <label>Acceptance Time (ms):</label>
        <input type="number" id="setting-acceptance" value="${e.acceptanceTime}" min="0" max="2000" step="50">
        <small>Hold time required to activate</small>
      </div>

      <div class="form-group">
        <label>Grid Size (Total items):</label>
        <input type="number" id="setting-gridsize" value="${e.gridSize}" min="4" max="100">
      </div>

      <div class="form-group">
        <label>
          <input type="checkbox" id="setting-sound" ${e.soundEnabled?"checked":""}>
          Sound Enabled
        </label>
      </div>
    `;this.formContainer.innerHTML=t;const s=this.formContainer.querySelector("#setting-strategy");s&&(s.value=e.scanStrategy);const r=this.formContainer.querySelector("#setting-content");r&&(r.value=e.gridContent)}bindEvents(){var e;(e=document.getElementById("close-settings"))==null||e.addEventListener("click",()=>{this.toggle(!1)}),this.formContainer.addEventListener("change",t=>{const s=t.target;if(!s)return;const r={};s.id==="setting-strategy"?r.scanStrategy=s.value:s.id==="setting-content"?r.gridContent=s.value:s.id==="setting-rate"?r.scanRate=parseInt(s.value,10):s.id==="setting-acceptance"?r.acceptanceTime=parseInt(s.value,10):s.id==="setting-gridsize"?r.gridSize=parseInt(s.value,10):s.id==="setting-sound"&&(r.soundEnabled=s.checked),this.configManager.update(r)})}toggle(e){this.isVisible=e!==void 0?e:!this.isVisible,this.isVisible?this.container.classList.remove("hidden"):this.container.classList.add("hidden")}}class b{constructor(e,t,s){h(this,"renderer");h(this,"config");h(this,"audio");h(this,"isRunning",!1);h(this,"timer",null);this.renderer=e,this.config=t,this.audio=s}start(){this.isRunning=!0,this.reset(),this.scheduleNextStep()}stop(){this.isRunning=!1,this.timer&&(clearTimeout(this.timer),this.timer=null),this.renderer.setFocus([])}scheduleNextStep(){if(!this.isRunning)return;const e=this.config.get().scanRate;this.timer&&clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.step(),this.audio.playScanSound(),this.scheduleNextStep()},e)}triggerSelection(e){const t=new CustomEvent("scanner:selection",{detail:{item:e}});window.dispatchEvent(t),this.audio.playSelectSound()}}class z extends b{constructor(){super(...arguments);h(this,"level","rows");h(this,"currentRow",-1);h(this,"currentCol",-1);h(this,"totalRows",0)}start(){this.recalcDimensions(),super.start()}recalcDimensions(){const t=this.renderer.getItemsCount();this.totalRows=Math.ceil(t/this.renderer.columns)}reset(){this.level="rows",this.currentRow=-1,this.currentCol=-1,this.renderer.setFocus([])}step(){this.level==="rows"?this.stepRows():this.stepCells()}stepRows(){this.currentRow++,this.currentRow>=this.totalRows&&(this.currentRow=0),this.highlightRow(this.currentRow)}stepCells(){const t=this.renderer.columns,s=this.renderer.getItemsCount(),r=this.currentRow*t,i=Math.min(t,s-r);this.currentCol++,this.currentCol>=i&&(this.currentCol=0);const o=r+this.currentCol;this.renderer.setFocus([o])}highlightRow(t){const s=this.renderer.columns,r=this.renderer.getItemsCount(),i=t*s,o=Math.min(i+s,r),n=[];for(let c=i;c<o;c++)n.push(c);this.renderer.setFocus(n)}handleAction(t){if(t==="select")if(this.level==="rows")this.currentRow>=0&&(this.level="cells",this.currentCol=-1,this.renderer.setSelected(this.currentRow*this.renderer.columns),this.timer&&clearTimeout(this.timer),this.scheduleNextStep());else{const s=this.currentRow*this.renderer.columns+this.currentCol,r=this.renderer.getItem(s);r&&(this.renderer.setSelected(s),this.triggerSelection(r),this.reset(),this.timer&&clearTimeout(this.timer),this.scheduleNextStep())}else t==="cancel"&&(this.level==="cells"?(this.level="rows",this.currentCol=-1,this.highlightRow(this.currentRow),this.timer&&clearTimeout(this.timer),this.scheduleNextStep()):this.reset())}}class q extends b{constructor(){super(...arguments);h(this,"currentIndex",-1);h(this,"totalItems",0)}start(){this.totalItems=this.countItems(),super.start()}countItems(){let t=0;for(;this.renderer.getItem(t);)t++;return t}reset(){this.currentIndex=-1,this.renderer.setFocus([])}step(){this.currentIndex++,this.currentIndex>=this.totalItems&&(this.currentIndex=0),this.renderer.setFocus([this.currentIndex])}handleAction(t){if(t==="select"){if(this.currentIndex>=0){const s=this.renderer.getItem(this.currentIndex);s&&(this.renderer.setSelected(this.currentIndex),this.triggerSelection(s),this.reset(),this.timer&&clearTimeout(this.timer),this.scheduleNextStep())}}else t==="step"&&(this.timer&&clearTimeout(this.timer),this.step(),this.audio.playScanSound(),this.scheduleNextStep())}}class G extends b{constructor(){super(...arguments);h(this,"currentIndex",-1);h(this,"totalItems",0);h(this,"currentFocusIndex",-1)}start(){this.totalItems=this.renderer.getItemsCount(),super.start()}reset(){this.currentIndex=-1,this.currentFocusIndex=-1,this.renderer.setFocus([])}step(){this.currentIndex++,this.currentIndex>=this.totalItems&&(this.currentIndex=0);const t=this.renderer.columns,s=Math.floor(this.currentIndex/t),r=this.currentIndex%t;let i=this.currentIndex;if(s%2===1&&(i=s*t+(t-1-r)),!this.renderer.getItem(i)){this.step();return}this.currentFocusIndex=i,this.renderer.setFocus([i])}handleAction(t){if(t==="select"){if(this.currentFocusIndex>=0){const s=this.renderer.getItem(this.currentFocusIndex);s&&(this.renderer.setSelected(this.currentFocusIndex),this.triggerSelection(s),this.reset(),this.timer&&clearTimeout(this.timer),this.scheduleNextStep())}}else t==="step"&&(this.timer&&clearTimeout(this.timer),this.step(),this.audio.playScanSound(),this.scheduleNextStep())}}class U extends b{constructor(){super(...arguments);h(this,"level","quadrant");h(this,"currentQuad",-1);h(this,"currentRow",-1);h(this,"currentCol",-1);h(this,"quads",[])}start(){this.calcQuadrants(),super.start()}calcQuadrants(){const t=this.renderer.getItemsCount(),s=this.renderer.columns,r=Math.ceil(t/s),i=Math.ceil(r/2),o=Math.ceil(s/2);this.quads=[{rowStart:0,rowEnd:i,colStart:0,colEnd:o},{rowStart:0,rowEnd:i,colStart:o,colEnd:s},{rowStart:i,rowEnd:r,colStart:0,colEnd:o},{rowStart:i,rowEnd:r,colStart:o,colEnd:s}]}reset(){this.level="quadrant",this.currentQuad=-1,this.currentRow=-1,this.currentCol=-1,this.renderer.setFocus([])}step(){this.level==="quadrant"?this.stepQuadrant():this.level==="row"?this.stepRow():this.stepCell()}stepQuadrant(){this.currentQuad++,this.currentQuad>=4&&(this.currentQuad=0),this.highlightQuad(this.currentQuad)}stepRow(){const t=this.quads[this.currentQuad],s=t.rowEnd-t.rowStart;this.currentRow++,this.currentRow>=s&&(this.currentRow=0);const r=t.rowStart+this.currentRow;this.highlightRowSegment(r,t.colStart,t.colEnd)}stepCell(){const t=this.quads[this.currentQuad],s=t.colEnd-t.colStart;this.currentCol++,this.currentCol>=s&&(this.currentCol=0);const r=t.rowStart+this.currentRow,i=t.colStart+this.currentCol,o=r*this.renderer.columns+i;this.renderer.getItem(o)?this.renderer.setFocus([o]):this.stepCell()}highlightQuad(t){const s=this.quads[t],r=[],i=this.renderer.columns,o=this.renderer.getItemsCount();for(let n=s.rowStart;n<s.rowEnd;n++)for(let c=s.colStart;c<s.colEnd;c++){const a=n*i+c;a<o&&r.push(a)}this.renderer.setFocus(r)}highlightRowSegment(t,s,r){const i=[],o=this.renderer.columns,n=this.renderer.getItemsCount();for(let c=s;c<r;c++){const a=t*o+c;a<n&&i.push(a)}this.renderer.setFocus(i)}handleAction(t){if(t==="select")if(this.level==="quadrant")this.currentQuad>=0&&(this.level="row",this.currentRow=-1,this.restartTimer());else if(this.level==="row")this.currentRow>=0&&(this.level="cell",this.currentCol=-1,this.restartTimer());else{const s=this.quads[this.currentQuad],r=(s.rowStart+this.currentRow)*this.renderer.columns+(s.colStart+this.currentCol),i=this.renderer.getItem(r);i&&(this.triggerSelection(i),this.reset(),this.restartTimer())}else t==="cancel"&&(this.level==="cell"?(this.level="row",this.currentCol=-1,this.restartTimer()):this.level==="row"?(this.level="quadrant",this.currentRow=-1,this.restartTimer()):this.reset())}restartTimer(){this.timer&&clearTimeout(this.timer),this.scheduleNextStep()}}class $ extends b{constructor(){super(...arguments);h(this,"level","group");h(this,"currentGroup",-1);h(this,"currentRow",-1);h(this,"currentCol",-1);h(this,"groups",[])}start(){this.calcGroups(),super.start()}calcGroups(){const t=this.renderer.getItemsCount(),s=this.renderer.columns,r=Math.ceil(t/s),i=Math.ceil(r/3);this.groups=[];for(let o=0;o<r;o+=i)this.groups.push({rowStart:o,rowEnd:Math.min(o+i,r)})}reset(){this.level="group",this.currentGroup=-1,this.currentRow=-1,this.currentCol=-1,this.renderer.setFocus([])}step(){this.level==="group"?this.stepGroup():this.level==="row"?this.stepRow():this.stepCell()}stepGroup(){this.currentGroup++,this.currentGroup>=this.groups.length&&(this.currentGroup=0),this.highlightGroup(this.currentGroup)}stepRow(){const t=this.groups[this.currentGroup],s=t.rowEnd-t.rowStart;this.currentRow++,this.currentRow>=s&&(this.currentRow=0);const r=t.rowStart+this.currentRow;this.highlightRow(r)}stepCell(){const t=this.renderer.columns;this.currentCol++,this.currentCol>=t&&(this.currentCol=0);const i=(this.groups[this.currentGroup].rowStart+this.currentRow)*t+this.currentCol;this.renderer.getItem(i)?this.renderer.setFocus([i]):this.currentCol<t-1&&this.stepCell()}highlightGroup(t){const s=this.groups[t],r=[],i=this.renderer.columns,o=this.renderer.getItemsCount();for(let n=s.rowStart;n<s.rowEnd;n++)for(let c=0;c<i;c++){const a=n*i+c;a<o&&r.push(a)}this.renderer.setFocus(r)}highlightRow(t){const s=this.renderer.columns,r=this.renderer.getItemsCount(),i=[];for(let o=0;o<s;o++){const n=t*s+o;n<r&&i.push(n)}this.renderer.setFocus(i)}handleAction(t){if(t==="select")if(this.level==="group")this.currentGroup>=0&&(this.level="row",this.currentRow=-1,this.restartTimer());else if(this.level==="row")this.currentRow>=0&&(this.level="cell",this.currentCol=-1,this.restartTimer());else{const r=(this.groups[this.currentGroup].rowStart+this.currentRow)*this.renderer.columns+this.currentCol,i=this.renderer.getItem(r);i&&(this.triggerSelection(i),this.reset(),this.restartTimer())}else t==="cancel"&&(this.level==="cell"?(this.level="row",this.currentCol=-1,this.restartTimer()):this.level==="row"?(this.level="group",this.currentRow=-1,this.restartTimer()):this.reset())}restartTimer(){this.timer&&clearTimeout(this.timer),this.scheduleNextStep()}}class Q extends b{constructor(){super(...arguments);h(this,"rangeStart",0);h(this,"rangeEnd",0);h(this,"currentHalf",0)}start(){this.rangeStart=0,this.rangeEnd=this.renderer.getItemsCount(),super.start()}reset(){this.rangeStart=0,this.rangeEnd=this.renderer.getItemsCount(),this.currentHalf=0,this.renderer.setFocus([])}step(){this.currentHalf=this.currentHalf===0?1:0,this.highlightCurrentHalf()}highlightCurrentHalf(){const t=this.rangeEnd-this.rangeStart,s=this.rangeStart+Math.ceil(t/2);let r,i;this.currentHalf===0?(r=this.rangeStart,i=s):(r=s,i=this.rangeEnd);const o=[];for(let n=r;n<i;n++)o.push(n);this.renderer.setFocus(o)}handleAction(t){if(t==="select"){const s=this.rangeEnd-this.rangeStart;if(s<=1){const i=this.renderer.getItem(this.rangeStart);i&&(this.triggerSelection(i),this.reset(),this.restartTimer());return}const r=this.rangeStart+Math.ceil(s/2);this.currentHalf===0?this.rangeEnd=r:this.rangeStart=r,this.currentHalf=1,this.currentHalf=1,this.restartTimer()}else t==="cancel"&&(this.reset(),this.restartTimer())}restartTimer(){this.timer&&clearTimeout(this.timer),this.scheduleNextStep()}}class D extends b{constructor(){super(...arguments);h(this,"overlay",null);h(this,"hBar",null);h(this,"cursor",null);h(this,"state","y-scan");h(this,"yPos",0);h(this,"xPos",0);h(this,"stepSize",1)}start(){this.createOverlay(),this.state="y-scan",this.yPos=0,this.xPos=0,super.start()}stop(){super.stop(),this.removeOverlay()}reset(){this.state="y-scan",this.yPos=0,this.xPos=0,this.updateOverlay()}step(){this.state==="y-scan"?(this.yPos+=this.stepSize,this.yPos>100&&(this.yPos=0)):this.state==="x-scan"&&(this.xPos+=this.stepSize,this.xPos>100&&(this.xPos=0)),this.updateOverlay()}scheduleNextStep(){this.isRunning&&(this.timer&&clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.step(),this.scheduleNextStep()},20))}createOverlay(){var t;this.overlay||(this.overlay=document.createElement("div"),this.overlay.style.position="absolute",this.overlay.style.top="0",this.overlay.style.left="0",this.overlay.style.width="100%",this.overlay.style.height="100%",this.overlay.style.pointerEvents="none",this.overlay.style.zIndex="50",this.hBar=document.createElement("div"),this.hBar.style.position="absolute",this.hBar.style.left="0",this.hBar.style.width="100%",this.hBar.style.height="2px",this.hBar.style.backgroundColor="red",this.overlay.appendChild(this.hBar),this.cursor=document.createElement("div"),this.cursor.style.position="absolute",this.cursor.style.width="10px",this.cursor.style.height="10px",this.cursor.style.backgroundColor="blue",this.cursor.style.borderRadius="50%",this.cursor.style.transform="translate(-50%, -50%)",this.cursor.style.display="none",this.overlay.appendChild(this.cursor),(t=document.getElementById("grid-container"))==null||t.appendChild(this.overlay))}removeOverlay(){this.overlay&&this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay),this.overlay=null}updateOverlay(){!this.hBar||!this.cursor||(this.hBar.style.top=`${this.yPos}%`,this.state==="x-scan"?(this.cursor.style.display="block",this.cursor.style.top=`${this.yPos}%`,this.cursor.style.left=`${this.xPos}%`):this.cursor.style.display="none")}handleAction(t){t==="select"?this.state==="y-scan"?(this.state="x-scan",this.xPos=0):this.state==="x-scan"&&(this.state="processing",this.selectAtPoint()):t==="cancel"&&this.reset()}selectAtPoint(){if(!this.overlay)return;const t=this.overlay.getBoundingClientRect(),s=t.left+this.xPos/100*t.width,r=t.top+this.yPos/100*t.height;this.overlay.style.display="none";const i=document.elementFromPoint(s,r);if(this.overlay.style.display="block",i){const o=i.closest(".grid-cell");if(o&&o.dataset.index){const n=parseInt(o.dataset.index,10),c=this.renderer.getItem(n);c&&(this.renderer.setSelected(n),this.triggerSelection(c))}}this.reset()}}function g(l,e){if(!l)throw new Error(e||"Assertion failed")}const C=0,T="<R>",H="<OOV>";class V{constructor(){this.symbols_=[],this.symbols_.push(T),this.symbolToId_=new Map,this.symbolToId_.set(T,0),this.oovSymbol_=-1}addSymbol(e){if(this.symbolToId_.has(e))return this.symbolToId_.get(e);const t=this.symbols_.length;return this.symbols_.push(e),this.symbolToId_.set(e,t),t}getSymbol(e){return this.symbolToId_.has(e)?this.symbolToId_.get(e):-1}getSymbolOrOOV(e){return this.symbolToId_.has(e)?this.symbolToId_.get(e):(this.oovSymbol_=this.addSymbol(H),this.oovSymbol_)}size(){return this.symbols_.length}}const W=.49,X=.77,Y=1e-10;class E{constructor(){this.child_=null,this.next_=null,this.backoff_=null,this.count_=1,this.symbol_=C}findChildWithSymbol(e){let t=this.child_;for(;t!=null;){if(t.symbol_==e)return t;t=t.next_}return t}totalChildrenCounts(e){let t=this.child_,s=0;for(;t!=null;)(!e||!e[t.symbol_])&&(s+=t.count_),t=t.next_;return s}}class v{constructor(e,t){this.head_=e,this.order_=t}}class k{constructor(e,t){this.vocab_=e,g(this.vocab_.size()>1,"Expecting at least two symbols in the vocabulary"),this.maxOrder_=t,this.root_=new E,this.rootContext_=new v,this.rootContext_.head_=this.root_,this.rootContext_.order_=0,this.numNodes_=1,this.useExclusion_=!1}addSymbolToNode_(e,t){let s=e.findChildWithSymbol(t);return s!=null?s.count_++:(s=new E,s.symbol_=t,s.next_=e.child_,e.child_=s,this.numNodes_++,e==this.root_?s.backoff_=this.root_:(g(e.backoff_!=null,"Expected valid backoff node"),s.backoff_=this.addSymbolToNode_(e.backoff_,t))),s}createContext(){return new v(this.rootContext_.head_,this.rootContext_.order_)}cloneContext(e){return new v(e.head_,e.order_)}addSymbolToContext(e,t){if(!(t<=C)){for(g(t<this.vocab_.size(),"Invalid symbol: "+t);e.head_!=null;){if(e.order_<this.maxOrder_){const s=e.head_.findChildWithSymbol(t);if(s!=null){e.head_=s,e.order_++;return}}e.order_--,e.head_=e.head_.backoff_}e.head_==null&&(e.head_=this.root_,e.order_=0)}}addSymbolAndUpdate(e,t){if(t<=C)return;g(t<this.vocab_.size(),"Invalid symbol: "+t);const s=this.addSymbolToNode_(e.head_,t);for(g(s==e.head_.findChildWithSymbol(t)),e.head_=s,e.order_++;e.order_>this.maxOrder_;)e.head_=e.head_.backoff_,e.order_--}getProbs(e){const t=this.vocab_.size();let s=new Array(t);for(let d=0;d<t;++d)s[d]=0;let r=null;if(this.useExclusion_){r=new Array(t);for(let d=0;d<t;++d)r[d]=!1}let i=1,o=e.head_,n=i;for(;o!=null;){const d=o.totalChildrenCounts(r);if(d>0){let m=o.child_;for(;m!=null;){const p=m.symbol_;if(!r||!r[p]){const w=n*(m.count_-X)/(d+W);s[p]+=w,i-=w,r&&(r[p]=!0)}m=m.next_}}o=o.backoff_,n=i}g(i>=0,"Invalid remaining probability mass: "+i);let c=0;for(let d=1;d<t;++d)(!r||!r[d])&&c++;const a=i;for(let d=1;d<t;++d)if(!r||!r[d]){const m=a/c;s[d]+=m,i-=m}let u=t-1,f=0;for(let d=1;d<t;++d){const m=i/u;s[d]+=m,i-=m,f+=s[d],--u}return g(i==0,"Expected remaining probability mass to be zero!"),g(Math.abs(1-f)<Y),s}printToConsole_(e,t){console.log(t+"  "+this.vocab_.symbols_[e.symbol_]+"("+e.symbol_+") ["+e.count_+"]"),t+="  ";let s=e.child_;for(;s!=null;)this.printToConsole_(s,t),s=s.next_}printToConsole(){this.printToConsole_(this.root_,"")}}function P(l,e){const t=l.length,s=e.length,r=Array(t+1).fill(null).map(()=>Array(s+1).fill(0));for(let i=0;i<=t;i++)r[i][0]=i;for(let i=0;i<=s;i++)r[0][i]=i;for(let i=1;i<=t;i++)for(let o=1;o<=s;o++)l[i-1]===e[o-1]?r[i][o]=r[i-1][o-1]:r[i][o]=Math.min(r[i-1][o]+1,r[i][o-1]+1,r[i-1][o-1]+1);return r[t][s]}function Z(l,e,t=!0){return t||(l=l.toLowerCase(),e=e.toLowerCase()),l.startsWith(e)}const _={q:["w","a","s"],w:["q","e","a","s","d"],e:["w","r","s","d","f"],r:["e","t","d","f","g"],t:["r","y","f","g","h"],y:["t","u","g","h","j"],u:["y","i","h","j","k"],i:["u","o","j","k","l"],o:["i","p","k","l"],p:["o","l"],a:["q","w","s","z","x"],s:["q","w","e","a","d","z","x","c"],d:["w","e","r","s","f","x","c","v"],f:["e","r","t","d","g","c","v","b"],g:["r","t","y","f","h","v","b","n"],h:["t","y","u","g","j","b","n","m"],j:["y","u","i","h","k","n","m"],k:["u","i","o","j","l","m"],l:["i","o","p","k"],z:["a","s","x"],x:["a","s","d","z","c"],c:["s","d","f","x","v"],v:["d","f","g","c","b"],b:["f","g","h","v","n"],n:["g","h","j","b","m"],m:["h","j","k","n"]};function R(){return _}function J(l,e,t=_){const s=l.toLowerCase(),r=e.toLowerCase();return t[s]&&t[s].includes(r)}function K(l,e,t=_){const s=l.length,r=e.length,i=Array(s+1).fill(null).map(()=>Array(r+1).fill(0));for(let o=0;o<=s;o++)i[o][0]=o;for(let o=0;o<=r;o++)i[0][o]=o;for(let o=1;o<=s;o++)for(let n=1;n<=r;n++)if(l[o-1]===e[n-1])i[o][n]=i[o-1][n-1];else{const c=J(l[o-1],e[n-1],t)?.5:1;i[o][n]=Math.min(i[o-1][n]+1,i[o][n-1]+1,i[o-1][n-1]+c)}return i[s][r]}function tt(l){return!l||typeof l!="string"?[]:l.trim().split(/\s+/).filter(e=>e.length>0)}function y(l){return!l||typeof l!="string"?[]:Array.from(l)}class A{constructor(e){this.term=e,this.children=new Map}}class et{constructor(e=P){this.root=null,this.distanceFn=e}isEmpty(){return this.root===null}insert(e){if(!e)return;if(!this.root){this.root=new A(e);return}let t=this.root;for(;;){const s=this.distanceFn(e,t.term);if(s===0)return;const r=t.children.get(s);if(r)t=r;else{t.children.set(s,new A(e));return}}}search(e,t){if(!this.root||t<0)return[];const s=[],r=[this.root];for(;r.length>0;){const i=r.pop(),o=this.distanceFn(e,i.term);o<=t&&s.push({term:i.term,distance:o});const n=o-t,c=o+t;for(const[a,u]of i.children.entries())a>=n&&a<=c&&r.push(u)}return s}}class M{constructor(){this.children=new Map,this.isWord=!1}}class st{constructor(){this.root=new M}insert(e){let t=this.root;for(const s of e)t.children.has(s)||t.children.set(s,new M),t=t.children.get(s);t.isWord=!0}collect(e,t){let s=this.root;for(const o of e){if(!s.children.has(o))return[];s=s.children.get(o)}const r=[],i=[[s,e]];for(;i.length>0&&r.length<t;){const[o,n]=i.pop();o.isWord&&r.push(n);const c=Array.from(o.children.entries());c.sort((a,u)=>u[0].localeCompare(a[0]));for(const[a,u]of c)i.push([u,n+a])}return r}}class it{constructor(e={}){this.config={maxOrder:e.maxOrder||5,errorTolerant:e.errorTolerant!==void 0?e.errorTolerant:!1,maxEditDistance:e.maxEditDistance||2,minSimilarity:e.minSimilarity||.5,keyboardAware:e.keyboardAware!==void 0?e.keyboardAware:!1,keyboardAdjacencyMap:e.keyboardAdjacencyMap||null,caseSensitive:e.caseSensitive!==void 0?e.caseSensitive:!1,maxPredictions:e.maxPredictions||10,adaptive:e.adaptive!==void 0?e.adaptive:!1,lexicon:e.lexicon||[]},this.vocab=new V;for(let t=32;t<=126;t++)this.vocab.addSymbol(String.fromCharCode(t));this.vocab.addSymbol(`
`),this.vocab.addSymbol("	"),this._corpora={default:{model:new k(this.vocab,this.config.maxOrder),enabled:!0,description:"Default training corpus",lexicon:this.config.lexicon||[],lexiconIndex:null,lexiconTree:null,lexiconTrie:null}},this._activeCorpora=["default"],this.model=this._corpora.default.model,this.context=this.model.createContext(),this._bigrams=new Map,this._totalBigrams=0,this._lastWord=null,this._buildCorpusLexicon("default")}train(e){if(!e||typeof e!="string")return;const t=y(e),s=this.model.createContext();for(const r of t){const i=this.vocab.addSymbol(r);this.model.addSymbolAndUpdate(s,i)}this._learnBigramsFromText(e)}addTrainingCorpus(e,t,s={}){if(!e||typeof e!="string")throw new Error("corpusKey must be a non-empty string");if(!t||typeof t!="string")throw new Error("text must be a non-empty string");const r=new k(this.vocab,this.config.maxOrder),i=y(t),o=r.createContext();for(const n of i){const c=this.vocab.addSymbol(n);r.addSymbolAndUpdate(o,c)}this._corpora[e]={model:r,enabled:s.enabled!==void 0?s.enabled:!0,description:s.description||`Training corpus: ${e}`,lexicon:s.lexicon||[],lexiconIndex:null,lexiconTree:null,lexiconTrie:null},this._buildCorpusLexicon(e),this._corpora[e].enabled&&!this._activeCorpora.includes(e)&&this._activeCorpora.push(e)}useCorpora(e){const t=Array.isArray(e)?e:[e];for(const s of t)if(!this._corpora[s])throw new Error(`Corpus '${s}' does not exist. Available: ${Object.keys(this._corpora).join(", ")}`);Object.keys(this._corpora).forEach(s=>{this._corpora[s].enabled=!1}),t.forEach(s=>{this._corpora[s].enabled=!0}),this._activeCorpora=t,t.includes("default")?this.model=this._corpora.default.model:t.length>0&&(this.model=this._corpora[t[0]].model)}useAllCorpora(){Object.keys(this._corpora).forEach(e=>{this._corpora[e].enabled=!0}),this._activeCorpora=Object.keys(this._corpora)}getCorpora(e=!1){return e?this._activeCorpora.slice():Object.keys(this._corpora)}getCorpusInfo(e){if(!this._corpora[e])throw new Error(`Corpus '${e}' does not exist`);return{key:e,description:this._corpora[e].description,enabled:this._corpora[e].enabled}}removeCorpus(e){if(e==="default")throw new Error("Cannot remove the default corpus");if(!this._corpora[e])throw new Error(`Corpus '${e}' does not exist`);delete this._corpora[e],this._activeCorpora=this._activeCorpora.filter(t=>t!==e)}resetContext(){this.context=this.model.createContext()}addToContext(e,t=null){if(!e||typeof e!="string")return;const s=t!==null?t:this.config.adaptive,r=y(e);for(const i of r){let o=this.vocab.getSymbol(i);o<0&&(o=this.vocab.addSymbol(i)),s?this.model.addSymbolAndUpdate(this.context,o):this.model.addSymbolToContext(this.context,o)}}predictNextCharacter(e=null){return this._activeCorpora.length===1?this._predictFromSingleCorpus(this._activeCorpora[0],e):this._predictFromMultipleCorpora(e)}_predictFromSingleCorpus(e,t=null){const s=this._corpora[e];let r=e==="default"?this.context:s.model.createContext();if(t!==null){r=s.model.createContext();const n=y(t);for(const c of n){let a=this.vocab.getSymbol(c);a<0&&(a=this.vocab.addSymbol(c)),s.model.addSymbolToContext(r,a)}}const i=s.model.getProbs(r),o=[];for(let n=1;n<i.length;n++)i[n]>0&&o.push({text:this.vocab.symbols_[n],probability:i[n]});return o.sort((n,c)=>c.probability-n.probability),o.slice(0,this.config.maxPredictions)}_predictFromMultipleCorpora(e=null){const t=new Map;for(const r of this._activeCorpora){const i=this._corpora[r];let o=i.model.createContext();if(e!==null){const c=y(e);for(const a of c){let u=this.vocab.getSymbol(a);u<0&&(u=this.vocab.addSymbol(a)),i.model.addSymbolToContext(o,u)}}else r==="default"&&(o=this.context);const n=i.model.getProbs(o);for(let c=1;c<n.length;c++)if(n[c]>0){const a=this.vocab.symbols_[c];t.has(a)||t.set(a,{totalProb:0,count:0});const u=t.get(a);u.totalProb+=n[c],u.count++}}const s=[];for(const[r,i]of t.entries())s.push({text:r,probability:i.totalProb/i.count});return s.sort((r,i)=>i.probability-r.probability),s.slice(0,this.config.maxPredictions)}predictWordCompletion(e,t=""){if(!e||typeof e!="string")return[];const s=this.config.caseSensitive?e:e.toLowerCase();return this._activeCorpora.some(i=>{const o=this._corpora[i];return o&&o.lexiconIndex&&o.lexiconIndex.size>0})?this._predictFromLexicon(s,t):this._predictCharacterBased(e,t)}_predictFromLexicon(e,t){const s=new Map,r=new Set;for(const i of this._activeCorpora){const o=this._corpora[i];if(!o||!o.lexiconIndex||o.lexiconIndex.size===0)continue;const n=o.lexicon||[];if(o.lexiconTrie){const c=o.lexiconTrie.collect(e,this.config.maxPredictions*2);for(const a of c)if(!r.has(a)){r.add(a);const u=n.indexOf(a);s.set(a,u>=0?u:n.length)}}else for(const c of o.lexiconIndex)if(Z(c,e,this.config.caseSensitive)&&!r.has(c)){r.add(c);const a=n.indexOf(c);s.set(c,a>=0?a:n.length)}if(this.config.errorTolerant&&e.length>=2&&o.lexiconTree&&!o.lexiconTree.isEmpty()){const c=o.lexiconTree.search(e,this.config.maxEditDistance);for(const a of c){const u=Math.max(e.length,a.term.length);if((u===0?1:1-a.distance/u)>=this.config.minSimilarity&&!r.has(a.term)){r.add(a.term);const d=n.indexOf(a.term);s.set(a.term,d>=0?d:n.length)}}}}return this._scoreCandidatesWithFrequency(s,t)}_predictCharacterBased(e,t){const s=[],i=t+e,o=this.model.createContext(),n=y(i);for(const a of n){let u=this.vocab.getSymbol(a);u>=0&&this.model.addSymbolToContext(o,u)}const c=this._generateCompletions(o,e,20-e.length,5);for(const a of c)s.push({text:a.text,probability:a.probability});return s}_generateCompletions(e,t,s,r){const i=[],o=this.vocab.getSymbol(" ");let n=[{context:this.model.cloneContext(e),text:t,prob:1}];for(let c=0;c<s;c++){const a=[];for(const u of n){const f=this.model.getProbs(u.context),d=[];for(let m=1;m<f.length;m++)f[m]>0&&d.push({id:m,prob:f[m]});d.sort((m,p)=>p.prob-m.prob);for(let m=0;m<Math.min(3,d.length);m++){const p=d[m].id,w=this.vocab.symbols_[p];if(p===o||w===`
`){u.text.length>t.length&&i.push({text:u.text,probability:u.prob});continue}const I=this.model.cloneContext(u.context);this.model.addSymbolToContext(I,p),a.push({context:I,text:u.text+w,prob:u.prob*d[m].prob})}}if(a.length===0)break;a.sort((u,f)=>f.prob-u.prob),n=a.slice(0,r)}for(const c of n)c.text.length>t.length&&i.push({text:c.text,probability:c.prob});return i.sort((c,a)=>a.probability-c.probability),i.slice(0,r)}_scoreCandidates(e,t){const s=[];for(const r of e){const i=this._scoreWord(r,t);s.push({text:r,probability:i})}return s.sort((r,i)=>i.probability-r.probability),s.slice(0,this.config.maxPredictions)}_scoreCandidatesWithFrequency(e,t){const s=[],r=Math.max(...e.values(),1);for(const[i,o]of e.entries()){const n=this._scoreWord(i,t),a=.7*(1-o/r)+.3*n;s.push({text:i,probability:a})}return s.sort((i,o)=>o.probability-i.probability),s.slice(0,this.config.maxPredictions)}_scoreWord(e,t){const s=t+e,r=this.model.createContext();let i=0;const o=y(s);for(const n of o){const c=this.vocab.getSymbol(n);if(c>=0){const u=this.model.getProbs(r)[c]||1e-10;i+=Math.log(u),this.model.addSymbolToContext(r,c)}}return Math.exp(i/o.length)}_learnBigramsFromText(e){if(!e||typeof e!="string")return;const s=tt(e).map(r=>this.config.caseSensitive?r:r.toLowerCase());for(let r=0;r<s.length-1;r++){const i=s[r],o=s[r+1];if(!i||!o||i.length===0||o.length===0)continue;const n=`${i} ${o}`,c=this._bigrams.get(n)||0;this._bigrams.set(n,c+1),this._totalBigrams++}}predictNextWord(e,t=10){if(!e||typeof e!="string")return[];const s=this.config.caseSensitive?e:e.toLowerCase(),r=new Map;let i=0;for(const[n,c]of this._bigrams.entries()){const[a,u]=n.split(" ");a===s&&(r.set(u,(r.get(u)||0)+c),i+=c)}const o=[];for(const[n,c]of r.entries())o.push({text:n,probability:c/i});return o.sort((n,c)=>c.probability-n.probability),o.slice(0,t)}exportBigrams(){const e=[];for(const[t,s]of this._bigrams.entries())e.push(`${t} ${s}`);return e.join(`
`)}importBigrams(e){if(!e||typeof e!="string")return;const t=e.split(`
`);for(const s of t){const r=s.trim();if(!r)continue;const i=r.split(" ");if(i.length<3)continue;const o=parseInt(i[i.length-1],10);if(isNaN(o)||o<=0)continue;const n=i.slice(0,i.length-1).join(" "),c=this._bigrams.get(n)||0;this._bigrams.set(n,c+o),this._totalBigrams+=o}}clearBigrams(){this._bigrams.clear(),this._totalBigrams=0,this._lastWord=null}getBigramStats(){return{uniqueBigrams:this._bigrams.size,totalBigrams:this._totalBigrams}}getConfig(){return{...this.config}}updateConfig(e){if(this.config={...this.config,...e},(e.lexicon||e.caseSensitive!==void 0||e.keyboardAdjacencyMap||e.keyboardAware!==void 0)&&(e.lexicon&&this._buildLexiconStructures(),e.keyboardAdjacencyMap||e.keyboardAware!==void 0))for(const t of Object.keys(this._corpora))this._buildCorpusLexicon(t)}_buildCorpusLexicon(e){const t=this._corpora[e];if(!t)return;const s=Array.isArray(t.lexicon)?t.lexicon:[];t.lexiconIndex=new Set,t.lexiconTrie=new st;const r=this._resolveAdjacencyMap(),i=this.config.keyboardAware?(o,n)=>K(o,n,r||R()):P;t.lexiconTree=new et(i);for(const o of s){if(typeof o!="string"||o.length===0)continue;const n=this.config.caseSensitive?o:o.toLowerCase();t.lexiconIndex.has(n)||(t.lexiconIndex.add(n),t.lexiconTree.insert(n),t.lexiconTrie.insert(n))}}_buildLexiconStructures(){this._corpora.default&&(this._corpora.default.lexicon=this.config.lexicon||[],this._buildCorpusLexicon("default")),this.keyboardAdjacency=this._resolveAdjacencyMap()}_resolveAdjacencyMap(){return this.config.keyboardAware?this.config.keyboardAdjacencyMap?this._normalizeAdjacencyMap(this.config.keyboardAdjacencyMap):R():null}_normalizeAdjacencyMap(e){const t={};for(const[s,r]of Object.entries(e)){if(typeof s!="string"||s.length===0)continue;const i=s.charAt(0).toLowerCase();if(t[i]||(t[i]=[]),Array.isArray(r))for(const o of r){if(typeof o!="string"||o.length===0)continue;const n=o.charAt(0).toLowerCase();t[i].includes(n)||t[i].push(n)}}return t}}function rt(l={}){return new it(l)}class ot{constructor(){h(this,"predictor");this.predictor=rt({adaptive:!0,maxOrder:5}),this.predictor.train("The quick brown fox jumps over the lazy dog. Hello world. How are you?")}addToContext(e){this.predictor.addToContext(e)}resetContext(){this.predictor.resetContext()}predictNext(){return this.predictor.predictNextCharacter()}}class nt extends b{constructor(t,s,r){super(t,s,r);h(this,"predictor");h(this,"scanOrder",[]);h(this,"currentIndex",-1);this.predictor=new ot}start(){this.updateProbabilities(),super.start()}reset(){this.currentIndex=-1,this.renderer.setFocus([])}step(){this.currentIndex++,this.currentIndex>=this.scanOrder.length&&(this.currentIndex=0);const t=this.scanOrder[this.currentIndex];this.renderer.setFocus([t])}handleAction(t){if(t==="select"){if(this.currentIndex>=0){const s=this.scanOrder[this.currentIndex],r=this.renderer.getItem(s);r&&(this.renderer.setSelected(s),this.triggerSelection(r),this.predictor.addToContext(r.label.toLowerCase()),this.updateProbabilities(),this.reset(),this.timer&&clearTimeout(this.timer),this.scheduleNextStep())}}else t==="cancel"&&this.reset()}updateProbabilities(){const t=this.predictor.predictNext(),s=this.renderer.getItemsCount(),r=[];for(let i=0;i<s;i++){const o=this.renderer.getItem(i);let n=1e-4;if(o&&o.label){const c=t.find(a=>a.text.toLowerCase()===o.label.toLowerCase());c&&(n=c.probability)}r.push({index:i,prob:n})}r.sort((i,o)=>o.prob-i.prob),this.scanOrder=r.map(i=>i.index)}}console.log("Scanner Demo Initialized");const ct=document.querySelector("#app");if(ct){const l=new S,e=new N(l.get().soundEnabled),t=new B(l),s=new O("grid-container"),r=new j(l),i=f=>{const d=[];for(let m=1;m<=f;m++)d.push({id:`item-${m}`,label:m.toString(),type:"action"});return d},o=()=>{const f="abcdefghijklmnopqrstuvwxyz".split("");return f.push(" ",".",",","?","!"),f.push("Backspace","Clear","Enter"),f.map((d,m)=>({id:`key-${m}`,label:d===" "?"Space":d,type:"char"}))},n=f=>{let d;f.gridContent==="keyboard"?d=o():d=i(f.gridSize),s.render(d)};n(l.get());let c=null;const a=f=>{switch(f){case"linear":return new q(s,l,e);case"snake":return new G(s,l,e);case"quadrant":return new U(s,l,e);case"group-row-column":return new $(s,l,e);case"elimination":return new Q(s,l,e);case"continuous":return new D(s,l,e);case"probability":return new nt(s,l,e);case"row-column":default:return new z(s,l,e)}},u=f=>{c&&c.stop(),c=a(f),c.start()};u(l.get().scanStrategy),l.subscribe(f=>{var m;e.setEnabled(f.soundEnabled),((((m=s.getItem(0))==null?void 0:m.type)==="char"?"keyboard":"numbers")!==f.gridContent||f.gridContent==="numbers"&&s.getItemsCount()!==f.gridSize)&&n(f),u(f.scanStrategy)}),t.addEventListener("switch",f=>{const d=f.detail;if(d.action==="menu"){r.toggle();return}c&&c.handleAction(d.action)}),window.addEventListener("scanner:selection",f=>{var p;const d=f.detail.item,m=document.getElementById("output-text");m&&(d.label==="Backspace"?m.textContent=((p=m.textContent)==null?void 0:p.slice(0,-1))||"":d.label==="Clear"?m.textContent="":d.label==="Enter"?m.textContent+=`
`:d.label==="Space"?m.textContent+=" ":m.textContent+=d.label)})}
